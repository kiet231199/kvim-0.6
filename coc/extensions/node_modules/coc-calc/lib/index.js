var Qt=Object.create;var Ve=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var er=Object.getOwnPropertyNames;var nr=Object.getPrototypeOf,tr=Object.prototype.hasOwnProperty;var Tn=i=>Ve(i,"__esModule",{value:!0});var Ke=(i,u)=>()=>(u||i((u={exports:{}}).exports,u),u.exports),rr=(i,u)=>{Tn(i);for(var a in u)Ve(i,a,{get:u[a],enumerable:!0})},ir=(i,u,a)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of er(u))!tr.call(i,h)&&h!=="default"&&Ve(i,h,{get:()=>u[h],enumerable:!(a=Yt(u,h))||a.enumerable});return i},ze=i=>ir(Tn(Ve(i!=null?Qt(nr(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var tt=Ke((ci,nt)=>{"use strict";function N(i){if(!(this instanceof N))return new N(i);this._=i}var x=N.prototype;function Wn(i,u){var a=0;for(a;a<i;a++)u(a)}function sr(i,u){Wn(u.length,function(a){i(u[a],a,u)})}function we(i,u,a){return sr(function(h,g,y){u=i(u,h,g,y)},a),u}function de(i,u){return we(function(a,h,g,y){return a.concat([i(h,g,y)])},[],u)}function or(i){var u=we(function(a,h,g,y){return a.concat(g===y.length-1?Buffer.from([h,0]).readUInt16BE(0):y.readUInt16BE(g))},[],i);return Buffer.from(de(function(a){return(a<<1&65535)>>8},u))}function ur(i,u){var a={v:0,buf:u};return Wn(i,function(){a={v:a.v<<1|ar(a.buf),buf:or(a.buf)}}),a}function ar(i){return i[0]>>7}function cr(i){return we(function(u,a){return u+a},0,i)}function fr(i,u){return we(function(a,h){return a||(i(h)?h:a)},null,u)}function Un(){return typeof Buffer!="undefined"}function lr(){if(N._supportsSet!==void 0)return N._supportsSet;var i=typeof Set!="undefined";return N._supportsSet=i,i}function Xe(){if(!Un())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function jn(i){Xe();var u=cr(i);if(u%8!=0)throw new Error("The bits ["+i.join(", ")+"] add up to "+u+" which is not an even number of bytes; the total should be divisible by 8");var a=u/8,h=fr(function(g){return g>48},i);if(h)throw new Error(h+" bit range requested exceeds 48 bit (6 byte) Number max.");return new N(function(g,y){var b=a+y;return b>g.length?Q(y,a.toString()+" bytes"):j(b,we(function(P,S){var B=ur(S,P.buf);return{coll:P.coll.concat(B.v),buf:B.buf}},{coll:[],buf:g.slice(y,b)},i).coll)})}function hr(i){Xe();var u={},a=0,h=de(function(b){if(Se(b)){var P=b;if(P.length!==2)throw new Error("["+P.join(", ")+"] should be length 2, got length "+P.length);if(Me(P[0]),Oe(P[1]),Object.prototype.hasOwnProperty.call(u,P[0]))throw new Error("duplicate key in bitSeqObj: "+P[0]);return u[P[0]]=!0,a++,P}else return Oe(b),[null,b]},i);if(a<1)throw new Error("bitSeqObj expects at least one named pair, got ["+i.join(", ")+"]");var g=de(function(b){return b[0]},h),y=de(function(b){return b[1]},h);return jn(y).map(function(b){var P=de(function(S,B){return[S,b[B]]},g);return we(function(S,B){return B[0]!==null&&(S[B[0]]=B[1]),S},{},P)})}function oe(i,u){return new N(function(a,h){return Xe(),h+u>a.length?Q(h,u+" bytes for "+i):j(h+u,a.slice(h,h+u))})}function dr(i){return oe("buffer",i).map(function(u){return Buffer.from(u)})}function pr(i,u){return oe("string",u).map(function(a){return a.toString(i)})}function mr(i){return typeof i=="number"&&Math.floor(i)===i}function Je(i,u){if(!mr(u)||u<0||u>6)throw new Error(i+" requires integer length in range [0, 6].")}function Qe(i){return Je("uintBE",i),oe("uintBE("+i+")",i).map(function(u){return u.readUIntBE(0,i)})}function Ye(i){return Je("uintLE",i),oe("uintLE("+i+")",i).map(function(u){return u.readUIntLE(0,i)})}function en(i){return Je("intBE",i),oe("intBE("+i+")",i).map(function(u){return u.readIntBE(0,i)})}function nn(i){return Je("intLE",i),oe("intLE("+i+")",i).map(function(u){return u.readIntLE(0,i)})}function gr(){return oe("floatBE",4).map(function(i){return i.readFloatBE(0)})}function wr(){return oe("floatLE",4).map(function(i){return i.readFloatLE(0)})}function vr(){return oe("doubleBE",8).map(function(i){return i.readDoubleBE(0)})}function Er(){return oe("doubleLE",8).map(function(i){return i.readDoubleLE(0)})}function yr(i){return Array.prototype.slice.call(i)}function Ae(i){return i instanceof N}function Se(i){return{}.toString.call(i)==="[object Array]"}function qe(i){return Un()&&Buffer.isBuffer(i)}function j(i,u){return{status:!0,index:i,value:u,furthest:-1,expected:[]}}function Q(i,u){return Se(u)||(u=[u]),{status:!1,index:-1,value:null,furthest:i,expected:u}}function ee(i,u){if(!u||i.furthest>u.furthest)return i;var a=i.furthest===u.furthest?Pr(i.expected,u.expected):u.expected;return{status:i.status,index:i.index,value:i.value,furthest:u.furthest,expected:a}}var tn={};function Zn(i,u){if(qe(i))return{offset:u,line:-1,column:-1};i in tn||(tn[i]={});for(var a=tn[i],h=0,g=0,y=0,b=u;b>=0;){if(b in a){h=a[b].line,y===0&&(y=a[b].lineStart);break}i.charAt(b)===`
`&&(g++,y===0&&(y=b+1)),b--}var P=h+g,S=u-y;return a[u]={line:P,lineStart:y},{offset:u,line:P+1,column:S+1}}function Pr(i,u){if(lr()&&Array.from){for(var a=new Set(i),h=0;h<u.length;h++)a.add(u[h]);var g=Array.from(a);return g.sort(),g}for(var y={},b=0;b<i.length;b++)y[i[b]]=!0;for(var P=0;P<u.length;P++)y[u[P]]=!0;var S=[];for(var B in y)({}).hasOwnProperty.call(y,B)&&S.push(B);return S.sort(),S}function Ce(i){if(!Ae(i))throw new Error("not a parser: "+i)}function rn(i,u){return typeof i=="string"?i.charAt(u):i[u]}function br(i){if(!Se(i))throw new Error("not an array: "+i)}function Oe(i){if(typeof i!="number")throw new Error("not a number: "+i)}function Nr(i){if(!(i instanceof RegExp))throw new Error("not a regexp: "+i);for(var u=Vn(i),a=0;a<u.length;a++){var h=u.charAt(a);if(h!=="i"&&h!=="m"&&h!=="u"&&h!=="s")throw new Error('unsupported regexp flag "'+h+'": '+i)}}function ve(i){if(typeof i!="function")throw new Error("not a function: "+i)}function Me(i){if(typeof i!="string")throw new Error("not a string: "+i)}var Sr=2,Cr=3,pe=8,Or=pe*5,kr=pe*4,$n="  ";function sn(i,u){return new Array(u+1).join(i)}function _r(i){return i.length===1?`Expected:

`+i[0]:`Expected one of the following: 

`+i.join(", ")}function on(i,u,a){var h=u-i.length;return h<=0?i:sn(a,h)+i}function Br(i,u){var a=i.length,h=[],g=0;if(a<=u)return[i.slice()];for(var y=0;y<a;y++)h[g]||h.push([]),h[g].push(i[y]),(y+1)%u==0&&g++;return h}function Hn(i,u,a,h){return{from:i-u>0?i-u:0,to:i+a>h?h:i+a}}function xr(i){return i.from===0&&i.to===1?{from:i.from,to:i.to}:{from:i.from/pe,to:Math.floor(i.to/pe)}}function Lr(i,u){var a=u.index,h=a.offset,g=1,y,b,P,S,B;if(h===i.length)return"Got the end of the input";if(qe(i)){var A=h-h%pe,C=h-A,D=Hn(A,Or,kr+pe,i.length),T=i.slice(D.from,D.to),Y=Br(T.toJSON().data,pe),fe=de(function(ie){return de(function(ke){return on(ke.toString(16),2,"0")},ie)},Y);S=xr(D),b=A/pe,y=C*3,C>=4&&(y+=1),g=2,P=de(function(ie){return ie.length<=4?ie.join(" "):ie.slice(0,4).join(" ")+"  "+ie.slice(4).join(" ")},fe),B=((S.to>0?S.to-1:S.to)*8).toString(16).length,B<2&&(B=2)}else{var ge=i.split(/\r\n|[\n\r\u2028\u2029]/);y=a.column-1,b=a.line-1,S=Hn(b,Sr,Cr,ge.length),P=ge.slice(S.from,S.to),B=S.to.toString().length}var $=b-S.from;qe(i)&&(B=((S.to>0?S.to-1:S.to)*8).toString(16).length,B<2&&(B=2));var U=we(function(ie,ke,_e){var Be=_e===$,J=Be?"> ":$n,k;return qe(i)?k=on(((S.from+_e)*8).toString(16),B,"0"):k=on((S.from+_e+1).toString(),B," "),[].concat(ie,[J+k+" | "+ke],Be?[$n+sn(" ",B)+" | "+on("",y," ")+sn("^",g)]:[])},[],P);return U.join(`
`)}function Gn(i,u){return[`
`,"-- PARSING FAILED "+sn("-",50),`

`,Lr(i,u),`

`,_r(u.expected),`
`].join("")}function Vn(i){return i.flags!==void 0?i.flags:[i.global?"g":"",i.ignoreCase?"i":"",i.multiline?"m":"",i.unicode?"u":"",i.sticky?"y":""].join("")}function Ar(i){return RegExp("^(?:"+i.source+")",Vn(i))}function un(){for(var i=[].slice.call(arguments),u=i.length,a=0;a<u;a+=1)Ce(i[a]);return N(function(h,g){for(var y,b=new Array(u),P=0;P<u;P+=1){if(y=ee(i[P]._(h,g),y),!y.status)return y;b[P]=y.value,g=y.index}return ee(j(g,b),y)})}function qr(){for(var i={},u=0,a=yr(arguments),h=a.length,g=0;g<h;g+=1){var y=a[g];if(!Ae(y)){if(Se(y)){var b=y.length===2&&typeof y[0]=="string"&&Ae(y[1]);if(b){var P=y[0];if(Object.prototype.hasOwnProperty.call(i,P))throw new Error("seqObj: duplicate key "+P);i[P]=!0,u++;continue}}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(u===0)throw new Error("seqObj expects at least one named parser, found zero");return N(function(S,B){for(var A,C={},D=0;D<h;D+=1){var T,Y;if(Se(a[D])?(T=a[D][0],Y=a[D][1]):(T=null,Y=a[D]),A=ee(Y._(S,B),A),!A.status)return A;T&&(C[T]=A.value),B=A.index}return ee(j(B,C),A)})}function Ee(){var i=[].slice.call(arguments);if(i.length===0)throw new Error("seqMap needs at least one argument");var u=i.pop();return ve(u),un.apply(null,i).map(function(a){return u.apply(null,a)})}function Mr(i){var u={};for(var a in i)({}).hasOwnProperty.call(i,a)&&function(h){var g=function(){return i[h](u)};u[h]=Xn(g)}(a);return u}function an(){var i=[].slice.call(arguments),u=i.length;if(u===0)return cn("zero alternates");for(var a=0;a<u;a+=1)Ce(i[a]);return N(function(h,g){for(var y,b=0;b<i.length;b+=1)if(y=ee(i[b]._(h,g),y),y.status)return y;return y})}function Kn(i,u){return Pn(i,u).or(ye([]))}function Pn(i,u){Ce(i),Ce(u);var a=u.then(i).many();return Ee(i,a,function(h,g){return[h].concat(g)})}x.parse=function(i){if(typeof i!="string"&&!qe(i))throw new Error(".parse must be called with a string or Buffer as its argument");var u=this.skip(Nn)._(i,0),a;return u.status?a={status:!0,value:u.value}:a={status:!1,index:Zn(i,u.furthest),expected:u.expected},delete tn[i],a};x.tryParse=function(i){var u=this.parse(i);if(u.status)return u.value;var a=Gn(i,u),h=new Error(a);throw h.type="ParsimmonError",h.result=u,h};x.assert=function(i,u){return this.chain(function(a){return i(a)?ye(a):cn(u)})};x.or=function(i){return an(this,i)};x.trim=function(i){return this.wrap(i,i)};x.wrap=function(i,u){return Ee(i,this,u,function(a,h){return h})};x.thru=function(i){return i(this)};x.then=function(i){return Ce(i),un(this,i).map(function(u){return u[1]})};x.many=function(){var i=this;return N(function(u,a){for(var h=[],g=void 0;;)if(g=ee(i._(u,a),g),g.status){if(a===g.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");a=g.index,h.push(g.value)}else return ee(j(a,h),g)})};x.tieWith=function(i){return Me(i),this.map(function(u){if(br(u),u.length){Me(u[0]);for(var a=u[0],h=1;h<u.length;h++)Me(u[h]),a+=i+u[h];return a}else return""})};x.tie=function(){return this.tieWith("")};x.times=function(i,u){var a=this;return arguments.length<2&&(u=i),Oe(i),Oe(u),N(function(h,g){for(var y=[],b=void 0,P=void 0,S=0;S<i;S+=1)if(b=a._(h,g),P=ee(b,P),b.status)g=b.index,y.push(b.value);else return P;for(;S<u&&(b=a._(h,g),P=ee(b,P),b.status);S+=1)g=b.index,y.push(b.value);return ee(j(g,y),P)})};x.result=function(i){return this.map(function(){return i})};x.atMost=function(i){return this.times(0,i)};x.atLeast=function(i){return Ee(this.times(i),this.many(),function(u,a){return u.concat(a)})};x.map=function(i){ve(i);var u=this;return N(function(a,h){var g=u._(a,h);return g.status?ee(j(g.index,i(g.value)),g):g})};x.contramap=function(i){ve(i);var u=this;return N(function(a,h){var g=u.parse(i(a.slice(h)));return g.status?j(h+a.length,g.value):g})};x.promap=function(i,u){return ve(i),ve(u),this.contramap(i).map(u)};x.skip=function(i){return un(this,i).map(function(u){return u[0]})};x.mark=function(){return Ee(Re,this,Re,function(i,u,a){return{start:i,value:u,end:a}})};x.node=function(i){return Ee(Re,this,Re,function(u,a,h){return{name:i,value:a,start:u,end:h}})};x.sepBy=function(i){return Kn(this,i)};x.sepBy1=function(i){return Pn(this,i)};x.lookahead=function(i){return this.skip(fn(i))};x.notFollowedBy=function(i){return this.skip(zn(i))};x.desc=function(i){Se(i)||(i=[i]);var u=this;return N(function(a,h){var g=u._(a,h);return g.status||(g.expected=i),g})};x.fallback=function(i){return this.or(ye(i))};x.ap=function(i){return Ee(i,this,function(u,a){return u(a)})};x.chain=function(i){var u=this;return N(function(a,h){var g=u._(a,h);if(!g.status)return g;var y=i(g.value);return ee(y._(a,g.index),g)})};function Ie(i){Me(i);var u="'"+i+"'";return N(function(a,h){var g=h+i.length,y=a.slice(h,g);return y===i?j(g,y):Q(h,u)})}function Ir(i){if(Xe(),Oe(i),i>255)throw new Error("Value specified to byte constructor ("+i+"=0x"+i.toString(16)+") is larger in value than a single byte.");var u=(i>15?"0x":"0x0")+i.toString(16);return N(function(a,h){var g=rn(a,h);return g===i?j(h+1,g):Q(h,u)})}function ae(i,u){Nr(i),arguments.length>=2?Oe(u):u=0;var a=Ar(i),h=""+i;return N(function(g,y){var b=a.exec(g.slice(y));if(b){if(0<=u&&u<=b.length){var P=b[0],S=b[u];return j(y+P.length,S)}var B="valid match group (0 to "+b.length+") in "+h;return Q(y,B)}return Q(y,h)})}function ye(i){return N(function(u,a){return j(a,i)})}function cn(i){return N(function(u,a){return Q(a,i)})}function fn(i){if(Ae(i))return N(function(u,a){var h=i._(u,a);return h.index=a,h.value="",h});if(typeof i=="string")return fn(Ie(i));if(i instanceof RegExp)return fn(ae(i));throw new Error("not a string, regexp, or parser: "+i)}function zn(i){return Ce(i),N(function(u,a){var h=i._(u,a),g=u.slice(a,h.index);return h.status?Q(a,'not "'+g+'"'):j(a,null)})}function ln(i){return ve(i),N(function(u,a){var h=rn(u,a);return a<u.length&&i(h)?j(a+1,h):Q(a,"a character/byte matching "+i)})}function Rr(i){for(var u=i.split(""),a=0;a<u.length;a++)u[a]="'"+u[a]+"'";return ln(function(h){return i.indexOf(h)>=0}).desc(u)}function Dr(i){return ln(function(u){return i.indexOf(u)<0}).desc("none of '"+i+"'")}function Fr(i){return N(i(j,Q))}function Tr(i,u){return ln(function(a){return i<=a&&a<=u}).desc(i+"-"+u)}function Wr(i){return ve(i),N(function(u,a){for(var h=a;h<u.length&&i(rn(u,h));)h++;return j(h,u.slice(a,h))})}function Xn(i,u){arguments.length<2&&(u=i,i=void 0);var a=N(function(h,g){return a._=u()._,a._(h,g)});return i?a.desc(i):a}function bn(){return cn("fantasy-land/empty")}x.concat=x.or;x.empty=bn;x.of=ye;x["fantasy-land/ap"]=x.ap;x["fantasy-land/chain"]=x.chain;x["fantasy-land/concat"]=x.concat;x["fantasy-land/empty"]=x.empty;x["fantasy-land/of"]=x.of;x["fantasy-land/map"]=x.map;var Re=N(function(i,u){return j(u,Zn(i,u))}),Ur=N(function(i,u){return u>=i.length?Q(u,"any character/byte"):j(u+1,rn(i,u))}),jr=N(function(i,u){return j(i.length,i.slice(u))}),Nn=N(function(i,u){return u<i.length?Q(u,"EOF"):j(u,null)}),Zr=ae(/[0-9]/).desc("a digit"),$r=ae(/[0-9]*/).desc("optional digits"),Hr=ae(/[a-z]/i).desc("a letter"),Gr=ae(/[a-z]*/i).desc("optional letters"),Vr=ae(/\s*/).desc("optional whitespace"),Kr=ae(/\s+/).desc("whitespace"),Jn=Ie("\r"),Qn=Ie(`
`),Yn=Ie(`\r
`),et=an(Yn,Qn,Jn).desc("newline"),zr=an(et,Nn);N.all=jr;N.alt=an;N.any=Ur;N.cr=Jn;N.createLanguage=Mr;N.crlf=Yn;N.custom=Fr;N.digit=Zr;N.digits=$r;N.empty=bn;N.end=zr;N.eof=Nn;N.fail=cn;N.formatError=Gn;N.index=Re;N.isParser=Ae;N.lazy=Xn;N.letter=Hr;N.letters=Gr;N.lf=Qn;N.lookahead=fn;N.makeFailure=Q;N.makeSuccess=j;N.newline=et;N.noneOf=Dr;N.notFollowedBy=zn;N.of=ye;N.oneOf=Rr;N.optWhitespace=Vr;N.Parser=N;N.range=Tr;N.regex=ae;N.regexp=ae;N.sepBy=Kn;N.sepBy1=Pn;N.seq=un;N.seqMap=Ee;N.seqObj=qr;N.string=Ie;N.succeed=ye;N.takeWhile=Wr;N.test=ln;N.whitespace=Kr;N["fantasy-land/empty"]=bn;N["fantasy-land/of"]=ye;N.Binary={bitSeq:jn,bitSeqObj:hr,byte:Ir,buffer:dr,encodedString:pr,uintBE:Qe,uint8BE:Qe(1),uint16BE:Qe(2),uint32BE:Qe(4),uintLE:Ye,uint8LE:Ye(1),uint16LE:Ye(2),uint32LE:Ye(4),intBE:en,int8BE:en(1),int16BE:en(2),int32BE:en(4),intLE:nn,int8LE:nn(1),int16LE:nn(2),int32LE:nn(4),floatBE:gr(),floatLE:wr(),doubleBE:vr(),doubleLE:Er()};nt.exports=N});var Sn=Ke((rt,hn)=>{(function(i){"use strict";var u=9e15,a=1e9,h="0123456789abcdef",g="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",y="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",b={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},P,S,B,A,C=!0,D="[DecimalError] ",T=D+"Invalid argument: ",Y=D+"Precision limit exceeded",fe=D+"crypto unavailable",ge="[object Decimal]",$=Math.floor,U=Math.pow,ie=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ke=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Be=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,J=1e7,k=7,at=9007199254740991,ct=g.length-1,pn=y.length-1,E={toStringTag:ge};E.absoluteValue=E.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),O(e)},E.ceil=function(){return O(new this.constructor(this),this.e+1,2)},E.clampedTo=E.clamp=function(e,n){var t,r=this,s=r.constructor;if(e=new s(e),n=new s(n),!e.s||!n.s)return new s(NaN);if(e.gt(n))throw Error(T+n);return t=r.cmp(e),t<0?e:r.cmp(n)>0?n:new s(r)},E.comparedTo=E.cmp=function(e){var n,t,r,s,o=this,c=o.d,f=(e=new o.constructor(e)).d,d=o.s,l=e.s;if(!c||!f)return!d||!l?NaN:d!==l?d:c===f?0:!c^d<0?1:-1;if(!c[0]||!f[0])return c[0]?d:f[0]?-l:0;if(d!==l)return d;if(o.e!==e.e)return o.e>e.e^d<0?1:-1;for(r=c.length,s=f.length,n=0,t=r<s?r:s;n<t;++n)if(c[n]!==f[n])return c[n]>f[n]^d<0?1:-1;return r===s?0:r>s^d<0?1:-1},E.cosine=E.cos=function(){var e,n,t=this,r=t.constructor;return t.d?t.d[0]?(e=r.precision,n=r.rounding,r.precision=e+Math.max(t.e,t.sd())+k,r.rounding=1,t=ft(r,In(r,t)),r.precision=e,r.rounding=n,O(A==2||A==3?t.neg():t,e,n,!0)):new r(1):new r(NaN)},E.cubeRoot=E.cbrt=function(){var e,n,t,r,s,o,c,f,d,l,p=this,m=p.constructor;if(!p.isFinite()||p.isZero())return new m(p);for(C=!1,o=p.s*U(p.s*p,1/3),!o||Math.abs(o)==1/0?(t=H(p.d),e=p.e,(o=(e-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=U(t,1/3),e=$((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new m(t),r.s=p.s):r=new m(o.toString()),c=(e=m.precision)+3;;)if(f=r,d=f.times(f).times(f),l=d.plus(p),r=M(l.plus(p).times(f),l.plus(d),c+2,1),H(f.d).slice(0,c)===(t=H(r.d)).slice(0,c))if(t=t.slice(c-3,c+1),t=="9999"||!s&&t=="4999"){if(!s&&(O(f,e+1,0),f.times(f).times(f).eq(p))){r=f;break}c+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(O(r,e+1,1),n=!r.times(r).times(r).eq(p));break}return C=!0,O(r,e,m.rounding,n)},E.decimalPlaces=E.dp=function(){var e,n=this.d,t=NaN;if(n){if(e=n.length-1,t=(e-$(this.e/k))*k,e=n[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t},E.dividedBy=E.div=function(e){return M(this,new this.constructor(e))},E.dividedToIntegerBy=E.divToInt=function(e){var n=this,t=n.constructor;return O(M(n,new t(e),0,1,1),t.precision,t.rounding)},E.equals=E.eq=function(e){return this.cmp(e)===0},E.floor=function(){return O(new this.constructor(this),this.e+1,3)},E.greaterThan=E.gt=function(e){return this.cmp(e)>0},E.greaterThanOrEqualTo=E.gte=function(e){var n=this.cmp(e);return n==1||n===0},E.hyperbolicCosine=E.cosh=function(){var e,n,t,r,s,o=this,c=o.constructor,f=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return f;t=c.precision,r=c.rounding,c.precision=t+Math.max(o.e,o.sd())+4,c.rounding=1,s=o.d.length,s<32?(e=Math.ceil(s/3),n=(1/je(4,e)).toString()):(e=16,n="2.3283064365386962890625e-10"),o=Ne(c,1,o.times(n),new c(1),!0);for(var d,l=e,p=new c(8);l--;)d=o.times(o),o=f.minus(d.times(p.minus(d.times(p))));return O(o,c.precision=t,c.rounding=r,!0)},E.hyperbolicSine=E.sinh=function(){var e,n,t,r,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(n=o.precision,t=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<3)s=Ne(o,2,s,s,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,s=s.times(1/je(5,e)),s=Ne(o,2,s,s,!0);for(var c,f=new o(5),d=new o(16),l=new o(20);e--;)c=s.times(s),s=s.times(f.plus(c.times(d.times(c).plus(l))))}return o.precision=n,o.rounding=t,O(s,n,t,!0)},E.hyperbolicTangent=E.tanh=function(){var e,n,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,n=r.rounding,r.precision=e+7,r.rounding=1,M(t.sinh(),t.cosh(),r.precision=e,r.rounding=n)):new r(t.s)},E.inverseCosine=E.acos=function(){var e,n=this,t=n.constructor,r=n.abs().cmp(1),s=t.precision,o=t.rounding;return r!==-1?r===0?n.isNeg()?ne(t,s,o):new t(0):new t(NaN):n.isZero()?ne(t,s+4,o).times(.5):(t.precision=s+6,t.rounding=1,n=n.asin(),e=ne(t,s+4,o).times(.5),t.precision=s,t.rounding=o,e.minus(n))},E.inverseHyperbolicCosine=E.acosh=function(){var e,n,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(e=r.precision,n=r.rounding,r.precision=e+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,C=!1,t=t.times(t).minus(1).sqrt().plus(t),C=!0,r.precision=e,r.rounding=n,t.ln()):new r(t)},E.inverseHyperbolicSine=E.asinh=function(){var e,n,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(e=r.precision,n=r.rounding,r.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,C=!1,t=t.times(t).plus(1).sqrt().plus(t),C=!0,r.precision=e,r.rounding=n,t.ln())},E.inverseHyperbolicTangent=E.atanh=function(){var e,n,t,r,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=o.precision,n=o.rounding,r=s.sd(),Math.max(r,e)<2*-s.e-1?O(new o(s),e,n,!0):(o.precision=t=r-s.e,s=M(s.plus(1),new o(1).minus(s),t+e,1),o.precision=e+4,o.rounding=1,s=s.ln(),o.precision=e,o.rounding=n,s.times(.5))):new o(NaN)},E.inverseSine=E.asin=function(){var e,n,t,r,s=this,o=s.constructor;return s.isZero()?new o(s):(n=s.abs().cmp(1),t=o.precision,r=o.rounding,n!==-1?n===0?(e=ne(o,t+4,r).times(.5),e.s=s.s,e):new o(NaN):(o.precision=t+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=r,s.times(2)))},E.inverseTangent=E.atan=function(){var e,n,t,r,s,o,c,f,d,l=this,p=l.constructor,m=p.precision,v=p.rounding;if(l.isFinite()){if(l.isZero())return new p(l);if(l.abs().eq(1)&&m+4<=pn)return c=ne(p,m+4,v).times(.25),c.s=l.s,c}else{if(!l.s)return new p(NaN);if(m+4<=pn)return c=ne(p,m+4,v).times(.5),c.s=l.s,c}for(p.precision=f=m+10,p.rounding=1,t=Math.min(28,f/k+2|0),e=t;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(C=!1,n=Math.ceil(f/k),r=1,d=l.times(l),c=new p(l),s=l;e!==-1;)if(s=s.times(d),o=c.minus(s.div(r+=2)),s=s.times(d),c=o.plus(s.div(r+=2)),c.d[n]!==void 0)for(e=n;c.d[e]===o.d[e]&&e--;);return t&&(c=c.times(2<<t-1)),C=!0,O(c,p.precision=m,p.rounding=v,!0)},E.isFinite=function(){return!!this.d},E.isInteger=E.isInt=function(){return!!this.d&&$(this.e/k)>this.d.length-2},E.isNaN=function(){return!this.s},E.isNegative=E.isNeg=function(){return this.s<0},E.isPositive=E.isPos=function(){return this.s>0},E.isZero=function(){return!!this.d&&this.d[0]===0},E.lessThan=E.lt=function(e){return this.cmp(e)<0},E.lessThanOrEqualTo=E.lte=function(e){return this.cmp(e)<1},E.logarithm=E.log=function(e){var n,t,r,s,o,c,f,d,l=this,p=l.constructor,m=p.precision,v=p.rounding,_=5;if(e==null)e=new p(10),n=!0;else{if(e=new p(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new p(NaN);n=e.eq(10)}if(t=l.d,l.s<0||!t||!t[0]||l.eq(1))return new p(t&&!t[0]?-1/0:l.s!=1?NaN:t?0:1/0);if(n)if(t.length>1)o=!0;else{for(s=t[0];s%10==0;)s/=10;o=s!==1}if(C=!1,f=m+_,c=he(l,f),r=n?Ue(p,f+10):he(e,f),d=M(c,r,f,1),xe(d.d,s=m,v))do if(f+=10,c=he(l,f),r=n?Ue(p,f+10):he(e,f),d=M(c,r,f,1),!o){+H(d.d).slice(s+1,s+15)+1==1e14&&(d=O(d,m+1,0));break}while(xe(d.d,s+=10,v));return C=!0,O(d,m,v)},E.minus=E.sub=function(e){var n,t,r,s,o,c,f,d,l,p,m,v,_=this,q=_.constructor;if(e=new q(e),!_.d||!e.d)return!_.s||!e.s?e=new q(NaN):_.d?e.s=-e.s:e=new q(e.d||_.s!==e.s?_:NaN),e;if(_.s!=e.s)return e.s=-e.s,_.plus(e);if(l=_.d,v=e.d,f=q.precision,d=q.rounding,!l[0]||!v[0]){if(v[0])e.s=-e.s;else if(l[0])e=new q(_);else return new q(d===3?-0:0);return C?O(e,f,d):e}if(t=$(e.e/k),p=$(_.e/k),l=l.slice(),o=p-t,o){for(m=o<0,m?(n=l,o=-o,c=v.length):(n=v,t=p,c=l.length),r=Math.max(Math.ceil(f/k),c)+2,o>r&&(o=r,n.length=1),n.reverse(),r=o;r--;)n.push(0);n.reverse()}else{for(r=l.length,c=v.length,m=r<c,m&&(c=r),r=0;r<c;r++)if(l[r]!=v[r]){m=l[r]<v[r];break}o=0}for(m&&(n=l,l=v,v=n,e.s=-e.s),c=l.length,r=v.length-c;r>0;--r)l[c++]=0;for(r=v.length;r>o;){if(l[--r]<v[r]){for(s=r;s&&l[--s]===0;)l[s]=J-1;--l[s],l[r]+=J}l[r]-=v[r]}for(;l[--c]===0;)l.pop();for(;l[0]===0;l.shift())--t;return l[0]?(e.d=l,e.e=We(l,t),C?O(e,f,d):e):new q(d===3?-0:0)},E.modulo=E.mod=function(e){var n,t=this,r=t.constructor;return e=new r(e),!t.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||t.d&&!t.d[0]?O(new r(t),r.precision,r.rounding):(C=!1,r.modulo==9?(n=M(t,e.abs(),0,3,1),n.s*=e.s):n=M(t,e,0,r.modulo,1),n=n.times(e),C=!0,t.minus(n))},E.naturalExponential=E.exp=function(){return mn(this)},E.naturalLogarithm=E.ln=function(){return he(this)},E.negated=E.neg=function(){var e=new this.constructor(this);return e.s=-e.s,O(e)},E.plus=E.add=function(e){var n,t,r,s,o,c,f,d,l,p,m=this,v=m.constructor;if(e=new v(e),!m.d||!e.d)return!m.s||!e.s?e=new v(NaN):m.d||(e=new v(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(l=m.d,p=e.d,f=v.precision,d=v.rounding,!l[0]||!p[0])return p[0]||(e=new v(m)),C?O(e,f,d):e;if(o=$(m.e/k),r=$(e.e/k),l=l.slice(),s=o-r,s){for(s<0?(t=l,s=-s,c=p.length):(t=p,r=o,c=l.length),o=Math.ceil(f/k),c=o>c?o+1:c+1,s>c&&(s=c,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(c=l.length,s=p.length,c-s<0&&(s=c,t=p,p=l,l=t),n=0;s;)n=(l[--s]=l[s]+p[s]+n)/J|0,l[s]%=J;for(n&&(l.unshift(n),++r),c=l.length;l[--c]==0;)l.pop();return e.d=l,e.e=We(l,r),C?O(e,f,d):e},E.precision=E.sd=function(e){var n,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(T+e);return t.d?(n=xn(t.d),e&&t.e+1>n&&(n=t.e+1)):n=NaN,n},E.round=function(){var e=this,n=e.constructor;return O(new n(e),e.e+1,n.rounding)},E.sine=E.sin=function(){var e,n,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,n=r.rounding,r.precision=e+Math.max(t.e,t.sd())+k,r.rounding=1,t=ht(r,In(r,t)),r.precision=e,r.rounding=n,O(A>2?t.neg():t,e,n,!0)):new r(NaN)},E.squareRoot=E.sqrt=function(){var e,n,t,r,s,o,c=this,f=c.d,d=c.e,l=c.s,p=c.constructor;if(l!==1||!f||!f[0])return new p(!l||l<0&&(!f||f[0])?NaN:f?c:1/0);for(C=!1,l=Math.sqrt(+c),l==0||l==1/0?(n=H(f),(n.length+d)%2==0&&(n+="0"),l=Math.sqrt(n),d=$((d+1)/2)-(d<0||d%2),l==1/0?n="5e"+d:(n=l.toExponential(),n=n.slice(0,n.indexOf("e")+1)+d),r=new p(n)):r=new p(l.toString()),t=(d=p.precision)+3;;)if(o=r,r=o.plus(M(c,o,t+2,1)).times(.5),H(o.d).slice(0,t)===(n=H(r.d)).slice(0,t))if(n=n.slice(t-3,t+1),n=="9999"||!s&&n=="4999"){if(!s&&(O(o,d+1,0),o.times(o).eq(c))){r=o;break}t+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(O(r,d+1,1),e=!r.times(r).eq(c));break}return C=!0,O(r,d,p.rounding,e)},E.tangent=E.tan=function(){var e,n,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,n=r.rounding,r.precision=e+10,r.rounding=1,t=t.sin(),t.s=1,t=M(t,new r(1).minus(t.times(t)).sqrt(),e+10,0),r.precision=e,r.rounding=n,O(A==2||A==4?t.neg():t,e,n,!0)):new r(NaN)},E.times=E.mul=function(e){var n,t,r,s,o,c,f,d,l,p=this,m=p.constructor,v=p.d,_=(e=new m(e)).d;if(e.s*=p.s,!v||!v[0]||!_||!_[0])return new m(!e.s||v&&!v[0]&&!_||_&&!_[0]&&!v?NaN:!v||!_?e.s/0:e.s*0);for(t=$(p.e/k)+$(e.e/k),d=v.length,l=_.length,d<l&&(o=v,v=_,_=o,c=d,d=l,l=c),o=[],c=d+l,r=c;r--;)o.push(0);for(r=l;--r>=0;){for(n=0,s=d+r;s>r;)f=o[s]+_[r]*v[s-r-1]+n,o[s--]=f%J|0,n=f/J|0;o[s]=(o[s]+n)%J|0}for(;!o[--c];)o.pop();return n?++t:o.shift(),e.d=o,e.e=We(o,t),C?O(e,m.precision,m.rounding):e},E.toBinary=function(e,n){return wn(this,2,e,n)},E.toDecimalPlaces=E.toDP=function(e,n){var t=this,r=t.constructor;return t=new r(t),e===void 0?t:(X(e,0,a),n===void 0?n=r.rounding:X(n,0,8),O(t,e+t.e+1,n))},E.toExponential=function(e,n){var t,r=this,s=r.constructor;return e===void 0?t=se(r,!0):(X(e,0,a),n===void 0?n=s.rounding:X(n,0,8),r=O(new s(r),e+1,n),t=se(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+t:t},E.toFixed=function(e,n){var t,r,s=this,o=s.constructor;return e===void 0?t=se(s):(X(e,0,a),n===void 0?n=o.rounding:X(n,0,8),r=O(new o(s),e+s.e+1,n),t=se(r,!1,e+r.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t},E.toFraction=function(e){var n,t,r,s,o,c,f,d,l,p,m,v,_=this,q=_.d,L=_.constructor;if(!q)return new L(_);if(l=t=new L(1),r=d=new L(0),n=new L(r),o=n.e=xn(q)-_.e-1,c=o%k,n.d[0]=U(10,c<0?k+c:c),e==null)e=o>0?n:l;else{if(f=new L(e),!f.isInt()||f.lt(l))throw Error(T+f);e=f.gt(n)?o>0?n:l:f}for(C=!1,f=new L(H(q)),p=L.precision,L.precision=o=q.length*k*2;m=M(f,n,0,1,1),s=t.plus(m.times(r)),s.cmp(e)!=1;)t=r,r=s,s=l,l=d.plus(m.times(s)),d=s,s=n,n=f.minus(m.times(s)),f=s;return s=M(e.minus(t),r,0,1,1),d=d.plus(s.times(l)),t=t.plus(s.times(r)),d.s=l.s=_.s,v=M(l,r,o,1).minus(_).abs().cmp(M(d,t,o,1).minus(_).abs())<1?[l,r]:[d,t],L.precision=p,C=!0,v},E.toHexadecimal=E.toHex=function(e,n){return wn(this,16,e,n)},E.toNearest=function(e,n){var t=this,r=t.constructor;if(t=new r(t),e==null){if(!t.d)return t;e=new r(1),n=r.rounding}else{if(e=new r(e),n===void 0?n=r.rounding:X(n,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(C=!1,t=M(t,e,0,n,1).times(e),C=!0,O(t)):(e.s=t.s,t=e),t},E.toNumber=function(){return+this},E.toOctal=function(e,n){return wn(this,8,e,n)},E.toPower=E.pow=function(e){var n,t,r,s,o,c,f=this,d=f.constructor,l=+(e=new d(e));if(!f.d||!e.d||!f.d[0]||!e.d[0])return new d(U(+f,l));if(f=new d(f),f.eq(1))return f;if(r=d.precision,o=d.rounding,e.eq(1))return O(f,r,o);if(n=$(e.e/k),n>=e.d.length-1&&(t=l<0?-l:l)<=at)return s=Ln(d,f,t,r),e.s<0?new d(1).div(s):O(s,r,o);if(c=f.s,c<0){if(n<e.d.length-1)return new d(NaN);if((e.d[n]&1)==0&&(c=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=c,f}return t=U(+f,l),n=t==0||!isFinite(t)?$(l*(Math.log("0."+H(f.d))/Math.LN10+f.e+1)):new d(t+"").e,n>d.maxE+1||n<d.minE-1?new d(n>0?c/0:0):(C=!1,d.rounding=f.s=1,t=Math.min(12,(n+"").length),s=mn(e.times(he(f,r+t)),r),s.d&&(s=O(s,r+5,1),xe(s.d,r,o)&&(n=r+10,s=O(mn(e.times(he(f,n+t)),n),n+5,1),+H(s.d).slice(r+1,r+15)+1==1e14&&(s=O(s,r+1,0)))),s.s=c,C=!0,d.rounding=o,O(s,r,o))},E.toPrecision=function(e,n){var t,r=this,s=r.constructor;return e===void 0?t=se(r,r.e<=s.toExpNeg||r.e>=s.toExpPos):(X(e,1,a),n===void 0?n=s.rounding:X(n,0,8),r=O(new s(r),e,n),t=se(r,e<=r.e||r.e<=s.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+t:t},E.toSignificantDigits=E.toSD=function(e,n){var t=this,r=t.constructor;return e===void 0?(e=r.precision,n=r.rounding):(X(e,1,a),n===void 0?n=r.rounding:X(n,0,8)),O(new r(t),e,n)},E.toString=function(){var e=this,n=e.constructor,t=se(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t},E.truncated=E.trunc=function(){return O(new this.constructor(this),this.e+1,1)},E.valueOf=E.toJSON=function(){var e=this,n=e.constructor,t=se(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()?"-"+t:t};function H(e){var n,t,r,s=e.length-1,o="",c=e[0];if(s>0){for(o+=c,n=1;n<s;n++)r=e[n]+"",t=k-r.length,t&&(o+=le(t)),o+=r;c=e[n],r=c+"",t=k-r.length,t&&(o+=le(t))}else if(c===0)return"0";for(;c%10==0;)c/=10;return o+c}function X(e,n,t){if(e!==~~e||e<n||e>t)throw Error(T+e)}function xe(e,n,t,r){var s,o,c,f;for(o=e[0];o>=10;o/=10)--n;return--n<0?(n+=k,s=0):(s=Math.ceil((n+1)/k),n%=k),o=U(10,k-n),f=e[s]%o|0,r==null?n<3?(n==0?f=f/100|0:n==1&&(f=f/10|0),c=t<4&&f==99999||t>3&&f==49999||f==5e4||f==0):c=(t<4&&f+1==o||t>3&&f+1==o/2)&&(e[s+1]/o/100|0)==U(10,n-2)-1||(f==o/2||f==0)&&(e[s+1]/o/100|0)==0:n<4?(n==0?f=f/1e3|0:n==1?f=f/100|0:n==2&&(f=f/10|0),c=(r||t<4)&&f==9999||!r&&t>3&&f==4999):c=((r||t<4)&&f+1==o||!r&&t>3&&f+1==o/2)&&(e[s+1]/o/1e3|0)==U(10,n-3)-1,c}function Te(e,n,t){for(var r,s=[0],o,c=0,f=e.length;c<f;){for(o=s.length;o--;)s[o]*=n;for(s[0]+=h.indexOf(e.charAt(c++)),r=0;r<s.length;r++)s[r]>t-1&&(s[r+1]===void 0&&(s[r+1]=0),s[r+1]+=s[r]/t|0,s[r]%=t)}return s.reverse()}function ft(e,n){var t,r,s;if(n.isZero())return n;r=n.d.length,r<32?(t=Math.ceil(r/3),s=(1/je(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),e.precision+=t,n=Ne(e,1,n.times(s),new e(1));for(var o=t;o--;){var c=n.times(n);n=c.times(c).minus(c).times(8).plus(1)}return e.precision-=t,n}var M=function(){function e(r,s,o){var c,f=0,d=r.length;for(r=r.slice();d--;)c=r[d]*s+f,r[d]=c%o|0,f=c/o|0;return f&&r.unshift(f),r}function n(r,s,o,c){var f,d;if(o!=c)d=o>c?1:-1;else for(f=d=0;f<o;f++)if(r[f]!=s[f]){d=r[f]>s[f]?1:-1;break}return d}function t(r,s,o,c){for(var f=0;o--;)r[o]-=f,f=r[o]<s[o]?1:0,r[o]=f*c+r[o]-s[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,o,c,f,d){var l,p,m,v,_,q,L,z,W,te,I,G,Ze,ue,vn,$e,Le,En,re,He,Ge=r.constructor,yn=r.s==s.s?1:-1,V=r.d,R=s.d;if(!V||!V[0]||!R||!R[0])return new Ge(!r.s||!s.s||(V?R&&V[0]==R[0]:!R)?NaN:V&&V[0]==0||!R?yn*0:yn/0);for(d?(_=1,p=r.e-s.e):(d=J,_=k,p=$(r.e/_)-$(s.e/_)),re=R.length,Le=V.length,W=new Ge(yn),te=W.d=[],m=0;R[m]==(V[m]||0);m++);if(R[m]>(V[m]||0)&&p--,o==null?(ue=o=Ge.precision,c=Ge.rounding):f?ue=o+(r.e-s.e)+1:ue=o,ue<0)te.push(1),q=!0;else{if(ue=ue/_+2|0,m=0,re==1){for(v=0,R=R[0],ue++;(m<Le||v)&&ue--;m++)vn=v*d+(V[m]||0),te[m]=vn/R|0,v=vn%R|0;q=v||m<Le}else{for(v=d/(R[0]+1)|0,v>1&&(R=e(R,v,d),V=e(V,v,d),re=R.length,Le=V.length),$e=re,I=V.slice(0,re),G=I.length;G<re;)I[G++]=0;He=R.slice(),He.unshift(0),En=R[0],R[1]>=d/2&&++En;do v=0,l=n(R,I,re,G),l<0?(Ze=I[0],re!=G&&(Ze=Ze*d+(I[1]||0)),v=Ze/En|0,v>1?(v>=d&&(v=d-1),L=e(R,v,d),z=L.length,G=I.length,l=n(L,I,z,G),l==1&&(v--,t(L,re<z?He:R,z,d))):(v==0&&(l=v=1),L=R.slice()),z=L.length,z<G&&L.unshift(0),t(I,L,G,d),l==-1&&(G=I.length,l=n(R,I,re,G),l<1&&(v++,t(I,re<G?He:R,G,d))),G=I.length):l===0&&(v++,I=[0]),te[m++]=v,l&&I[0]?I[G++]=V[$e]||0:(I=[V[$e]],G=1);while(($e++<Le||I[0]!==void 0)&&ue--);q=I[0]!==void 0}te[0]||te.shift()}if(_==1)W.e=p,S=q;else{for(m=1,v=te[0];v>=10;v/=10)m++;W.e=m+p*_-1,O(W,f?o+W.e+1:o,c,q)}return W}}();function O(e,n,t,r){var s,o,c,f,d,l,p,m,v,_=e.constructor;e:if(n!=null){if(m=e.d,!m)return e;for(s=1,f=m[0];f>=10;f/=10)s++;if(o=n-s,o<0)o+=k,c=n,p=m[v=0],d=p/U(10,s-c-1)%10|0;else if(v=Math.ceil((o+1)/k),f=m.length,v>=f)if(r){for(;f++<=v;)m.push(0);p=d=0,s=1,o%=k,c=o-k+1}else break e;else{for(p=f=m[v],s=1;f>=10;f/=10)s++;o%=k,c=o-k+s,d=c<0?0:p/U(10,s-c-1)%10|0}if(r=r||n<0||m[v+1]!==void 0||(c<0?p:p%U(10,s-c-1)),l=t<4?(d||r)&&(t==0||t==(e.s<0?3:2)):d>5||d==5&&(t==4||r||t==6&&(o>0?c>0?p/U(10,s-c):0:m[v-1])%10&1||t==(e.s<0?8:7)),n<1||!m[0])return m.length=0,l?(n-=e.e+1,m[0]=U(10,(k-n%k)%k),e.e=-n||0):m[0]=e.e=0,e;if(o==0?(m.length=v,f=1,v--):(m.length=v+1,f=U(10,k-o),m[v]=c>0?(p/U(10,s-c)%U(10,c)|0)*f:0),l)for(;;)if(v==0){for(o=1,c=m[0];c>=10;c/=10)o++;for(c=m[0]+=f,f=1;c>=10;c/=10)f++;o!=f&&(e.e++,m[0]==J&&(m[0]=1));break}else{if(m[v]+=f,m[v]!=J)break;m[v--]=0,f=1}for(o=m.length;m[--o]===0;)m.pop()}return C&&(e.e>_.maxE?(e.d=null,e.e=NaN):e.e<_.minE&&(e.e=0,e.d=[0])),e}function se(e,n,t){if(!e.isFinite())return Mn(e);var r,s=e.e,o=H(e.d),c=o.length;return n?(t&&(r=t-c)>0?o=o.charAt(0)+"."+o.slice(1)+le(r):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):s<0?(o="0."+le(-s-1)+o,t&&(r=t-c)>0&&(o+=le(r))):s>=c?(o+=le(s+1-c),t&&(r=t-s-1)>0&&(o=o+"."+le(r))):((r=s+1)<c&&(o=o.slice(0,r)+"."+o.slice(r)),t&&(r=t-c)>0&&(s+1===c&&(o+="."),o+=le(r))),o}function We(e,n){var t=e[0];for(n*=k;t>=10;t/=10)n++;return n}function Ue(e,n,t){if(n>ct)throw C=!0,t&&(e.precision=t),Error(Y);return O(new e(g),n,1,!0)}function ne(e,n,t){if(n>pn)throw Error(Y);return O(new e(y),n,t,!0)}function xn(e){var n=e.length-1,t=n*k+1;if(n=e[n],n){for(;n%10==0;n/=10)t--;for(n=e[0];n>=10;n/=10)t++}return t}function le(e){for(var n="";e--;)n+="0";return n}function Ln(e,n,t,r){var s,o=new e(1),c=Math.ceil(r/k+4);for(C=!1;;){if(t%2&&(o=o.times(n),Rn(o.d,c)&&(s=!0)),t=$(t/2),t===0){t=o.d.length-1,s&&o.d[t]===0&&++o.d[t];break}n=n.times(n),Rn(n.d,c)}return C=!0,o}function An(e){return e.d[e.d.length-1]&1}function qn(e,n,t){for(var r,s=new e(n[0]),o=0;++o<n.length;)if(r=new e(n[o]),r.s)s[t](r)&&(s=r);else{s=r;break}return s}function mn(e,n){var t,r,s,o,c,f,d,l=0,p=0,m=0,v=e.constructor,_=v.rounding,q=v.precision;if(!e.d||!e.d[0]||e.e>17)return new v(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(n==null?(C=!1,d=q):d=n,f=new v(.03125);e.e>-2;)e=e.times(f),m+=5;for(r=Math.log(U(2,m))/Math.LN10*2+5|0,d+=r,t=o=c=new v(1),v.precision=d;;){if(o=O(o.times(e),d,1),t=t.times(++p),f=c.plus(M(o,t,d,1)),H(f.d).slice(0,d)===H(c.d).slice(0,d)){for(s=m;s--;)c=O(c.times(c),d,1);if(n==null)if(l<3&&xe(c.d,d-r,_,l))v.precision=d+=10,t=o=f=new v(1),p=0,l++;else return O(c,v.precision=q,_,C=!0);else return v.precision=q,c}c=f}}function he(e,n){var t,r,s,o,c,f,d,l,p,m,v,_=1,q=10,L=e,z=L.d,W=L.constructor,te=W.rounding,I=W.precision;if(L.s<0||!z||!z[0]||!L.e&&z[0]==1&&z.length==1)return new W(z&&!z[0]?-1/0:L.s!=1?NaN:z?0:L);if(n==null?(C=!1,p=I):p=n,W.precision=p+=q,t=H(z),r=t.charAt(0),Math.abs(o=L.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)L=L.times(e),t=H(L.d),r=t.charAt(0),_++;o=L.e,r>1?(L=new W("0."+t),o++):L=new W(r+"."+t.slice(1))}else return l=Ue(W,p+2,I).times(o+""),L=he(new W(r+"."+t.slice(1)),p-q).plus(l),W.precision=I,n==null?O(L,I,te,C=!0):L;for(m=L,d=c=L=M(L.minus(1),L.plus(1),p,1),v=O(L.times(L),p,1),s=3;;){if(c=O(c.times(v),p,1),l=d.plus(M(c,new W(s),p,1)),H(l.d).slice(0,p)===H(d.d).slice(0,p))if(d=d.times(2),o!==0&&(d=d.plus(Ue(W,p+2,I).times(o+""))),d=M(d,new W(_),p,1),n==null)if(xe(d.d,p-q,te,f))W.precision=p+=q,l=c=L=M(m.minus(1),m.plus(1),p,1),v=O(L.times(L),p,1),s=f=1;else return O(d,W.precision=I,te,C=!0);else return W.precision=I,d;d=l,s+=2}}function Mn(e){return String(e.s*e.s/0)}function gn(e,n){var t,r,s;for((t=n.indexOf("."))>-1&&(n=n.replace(".","")),(r=n.search(/e/i))>0?(t<0&&(t=r),t+=+n.slice(r+1),n=n.substring(0,r)):t<0&&(t=n.length),r=0;n.charCodeAt(r)===48;r++);for(s=n.length;n.charCodeAt(s-1)===48;--s);if(n=n.slice(r,s),n){if(s-=r,e.e=t=t-r-1,e.d=[],r=(t+1)%k,t<0&&(r+=k),r<s){for(r&&e.d.push(+n.slice(0,r)),s-=k;r<s;)e.d.push(+n.slice(r,r+=k));n=n.slice(r),r=k-n.length}else r-=s;for(;r--;)n+="0";e.d.push(+n),C&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function lt(e,n){var t,r,s,o,c,f,d,l,p;if(n.indexOf("_")>-1){if(n=n.replace(/(\d)_(?=\d)/g,"$1"),Be.test(n))return gn(e,n)}else if(n==="Infinity"||n==="NaN")return+n||(e.s=NaN),e.e=NaN,e.d=null,e;if(ke.test(n))t=16,n=n.toLowerCase();else if(ie.test(n))t=2;else if(_e.test(n))t=8;else throw Error(T+n);for(o=n.search(/p/i),o>0?(d=+n.slice(o+1),n=n.substring(2,o)):n=n.slice(2),o=n.indexOf("."),c=o>=0,r=e.constructor,c&&(n=n.replace(".",""),f=n.length,o=f-o,s=Ln(r,new r(t),o,o*2)),l=Te(n,t,J),p=l.length-1,o=p;l[o]===0;--o)l.pop();return o<0?new r(e.s*0):(e.e=We(l,p),e.d=l,C=!1,c&&(e=M(e,s,f*4)),d&&(e=e.times(Math.abs(d)<54?U(2,d):P.pow(2,d))),C=!0,e)}function ht(e,n){var t,r=n.d.length;if(r<3)return n.isZero()?n:Ne(e,2,n,n);t=1.4*Math.sqrt(r),t=t>16?16:t|0,n=n.times(1/je(5,t)),n=Ne(e,2,n,n);for(var s,o=new e(5),c=new e(16),f=new e(20);t--;)s=n.times(n),n=n.times(o.plus(s.times(c.times(s).minus(f))));return n}function Ne(e,n,t,r,s){var o,c,f,d,l=1,p=e.precision,m=Math.ceil(p/k);for(C=!1,d=t.times(t),f=new e(r);;){if(c=M(f.times(d),new e(n++*n++),p,1),f=s?r.plus(c):r.minus(c),r=M(c.times(d),new e(n++*n++),p,1),c=f.plus(r),c.d[m]!==void 0){for(o=m;c.d[o]===f.d[o]&&o--;);if(o==-1)break}o=f,f=r,r=c,c=o,l++}return C=!0,c.d.length=m+1,c}function je(e,n){for(var t=e;--n;)t*=e;return t}function In(e,n){var t,r=n.s<0,s=ne(e,e.precision,1),o=s.times(.5);if(n=n.abs(),n.lte(o))return A=r?4:1,n;if(t=n.divToInt(s),t.isZero())A=r?3:2;else{if(n=n.minus(t.times(s)),n.lte(o))return A=An(t)?r?2:3:r?4:1,n;A=An(t)?r?1:4:r?3:2}return n.minus(s).abs()}function wn(e,n,t,r){var s,o,c,f,d,l,p,m,v,_=e.constructor,q=t!==void 0;if(q?(X(t,1,a),r===void 0?r=_.rounding:X(r,0,8)):(t=_.precision,r=_.rounding),!e.isFinite())p=Mn(e);else{for(p=se(e),c=p.indexOf("."),q?(s=2,n==16?t=t*4-3:n==8&&(t=t*3-2)):s=n,c>=0&&(p=p.replace(".",""),v=new _(1),v.e=p.length-c,v.d=Te(se(v),10,s),v.e=v.d.length),m=Te(p,10,s),o=d=m.length;m[--d]==0;)m.pop();if(!m[0])p=q?"0p+0":"0";else{if(c<0?o--:(e=new _(e),e.d=m,e.e=o,e=M(e,v,t,r,0,s),m=e.d,o=e.e,l=S),c=m[t],f=s/2,l=l||m[t+1]!==void 0,l=r<4?(c!==void 0||l)&&(r===0||r===(e.s<0?3:2)):c>f||c===f&&(r===4||l||r===6&&m[t-1]&1||r===(e.s<0?8:7)),m.length=t,l)for(;++m[--t]>s-1;)m[t]=0,t||(++o,m.unshift(1));for(d=m.length;!m[d-1];--d);for(c=0,p="";c<d;c++)p+=h.charAt(m[c]);if(q){if(d>1)if(n==16||n==8){for(c=n==16?4:3,--d;d%c;d++)p+="0";for(m=Te(p,s,n),d=m.length;!m[d-1];--d);for(c=1,p="1.";c<d;c++)p+=h.charAt(m[c])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>d)for(o-=d;o--;)p+="0";else o<d&&(p=p.slice(0,o)+"."+p.slice(o))}p=(n==16?"0x":n==2?"0b":n==8?"0o":"")+p}return e.s<0?"-"+p:p}function Rn(e,n){if(e.length>n)return e.length=n,!0}function dt(e){return new this(e).abs()}function pt(e){return new this(e).acos()}function mt(e){return new this(e).acosh()}function gt(e,n){return new this(e).plus(n)}function wt(e){return new this(e).asin()}function vt(e){return new this(e).asinh()}function Et(e){return new this(e).atan()}function yt(e){return new this(e).atanh()}function Pt(e,n){e=new this(e),n=new this(n);var t,r=this.precision,s=this.rounding,o=r+4;return!e.s||!n.s?t=new this(NaN):!e.d&&!n.d?(t=ne(this,o,1).times(n.s>0?.25:.75),t.s=e.s):!n.d||e.isZero()?(t=n.s<0?ne(this,r,s):new this(0),t.s=e.s):!e.d||n.isZero()?(t=ne(this,o,1).times(.5),t.s=e.s):n.s<0?(this.precision=o,this.rounding=1,t=this.atan(M(e,n,o,1)),n=ne(this,o,1),this.precision=r,this.rounding=s,t=e.s<0?t.minus(n):t.plus(n)):t=this.atan(M(e,n,o,1)),t}function bt(e){return new this(e).cbrt()}function Nt(e){return O(e=new this(e),e.e+1,2)}function St(e,n,t){return new this(e).clamp(n,t)}function Ct(e){if(!e||typeof e!="object")throw Error(D+"Object expected");var n,t,r,s=e.defaults===!0,o=["precision",1,a,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(n=0;n<o.length;n+=3)if(t=o[n],s&&(this[t]=b[t]),(r=e[t])!==void 0)if($(r)===r&&r>=o[n+1]&&r<=o[n+2])this[t]=r;else throw Error(T+t+": "+r);if(t="crypto",s&&(this[t]=b[t]),(r=e[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(fe);else this[t]=!1;else throw Error(T+t+": "+r);return this}function Ot(e){return new this(e).cos()}function kt(e){return new this(e).cosh()}function Dn(e){var n,t,r;function s(o){var c,f,d,l=this;if(!(l instanceof s))return new s(o);if(l.constructor=s,Fn(o)){l.s=o.s,C?!o.d||o.e>s.maxE?(l.e=NaN,l.d=null):o.e<s.minE?(l.e=0,l.d=[0]):(l.e=o.e,l.d=o.d.slice()):(l.e=o.e,l.d=o.d?o.d.slice():o.d);return}if(d=typeof o,d==="number"){if(o===0){l.s=1/o<0?-1:1,l.e=0,l.d=[0];return}if(o<0?(o=-o,l.s=-1):l.s=1,o===~~o&&o<1e7){for(c=0,f=o;f>=10;f/=10)c++;C?c>s.maxE?(l.e=NaN,l.d=null):c<s.minE?(l.e=0,l.d=[0]):(l.e=c,l.d=[o]):(l.e=c,l.d=[o]);return}else if(o*0!=0){o||(l.s=NaN),l.e=NaN,l.d=null;return}return gn(l,o.toString())}else if(d!=="string")throw Error(T+o);return(f=o.charCodeAt(0))===45?(o=o.slice(1),l.s=-1):(f===43&&(o=o.slice(1)),l.s=1),Be.test(o)?gn(l,o):lt(l,o)}if(s.prototype=E,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Ct,s.clone=Dn,s.isDecimal=Fn,s.abs=dt,s.acos=pt,s.acosh=mt,s.add=gt,s.asin=wt,s.asinh=vt,s.atan=Et,s.atanh=yt,s.atan2=Pt,s.cbrt=bt,s.ceil=Nt,s.clamp=St,s.cos=Ot,s.cosh=kt,s.div=_t,s.exp=Bt,s.floor=xt,s.hypot=Lt,s.ln=At,s.log=qt,s.log10=It,s.log2=Mt,s.max=Rt,s.min=Dt,s.mod=Ft,s.mul=Tt,s.pow=Wt,s.random=Ut,s.round=jt,s.sign=Zt,s.sin=$t,s.sinh=Ht,s.sqrt=Gt,s.sub=Vt,s.sum=Kt,s.tan=zt,s.tanh=Xt,s.trunc=Jt,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)e.hasOwnProperty(t=r[n++])||(e[t]=this[t]);return s.config(e),s}function _t(e,n){return new this(e).div(n)}function Bt(e){return new this(e).exp()}function xt(e){return O(e=new this(e),e.e+1,3)}function Lt(){var e,n,t=new this(0);for(C=!1,e=0;e<arguments.length;)if(n=new this(arguments[e++]),n.d)t.d&&(t=t.plus(n.times(n)));else{if(n.s)return C=!0,new this(1/0);t=n}return C=!0,t.sqrt()}function Fn(e){return e instanceof P||e&&e.toStringTag===ge||!1}function At(e){return new this(e).ln()}function qt(e,n){return new this(e).log(n)}function Mt(e){return new this(e).log(2)}function It(e){return new this(e).log(10)}function Rt(){return qn(this,arguments,"lt")}function Dt(){return qn(this,arguments,"gt")}function Ft(e,n){return new this(e).mod(n)}function Tt(e,n){return new this(e).mul(n)}function Wt(e,n){return new this(e).pow(n)}function Ut(e){var n,t,r,s,o=0,c=new this(1),f=[];if(e===void 0?e=this.precision:X(e,1,a),r=Math.ceil(e/k),this.crypto)if(crypto.getRandomValues)for(n=crypto.getRandomValues(new Uint32Array(r));o<r;)s=n[o],s>=429e7?n[o]=crypto.getRandomValues(new Uint32Array(1))[0]:f[o++]=s%1e7;else if(crypto.randomBytes){for(n=crypto.randomBytes(r*=4);o<r;)s=n[o]+(n[o+1]<<8)+(n[o+2]<<16)+((n[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(n,o):(f.push(s%1e7),o+=4);o=r/4}else throw Error(fe);else for(;o<r;)f[o++]=Math.random()*1e7|0;for(r=f[--o],e%=k,r&&e&&(s=U(10,k-e),f[o]=(r/s|0)*s);f[o]===0;o--)f.pop();if(o<0)t=0,f=[0];else{for(t=-1;f[0]===0;t-=k)f.shift();for(r=1,s=f[0];s>=10;s/=10)r++;r<k&&(t-=k-r)}return c.e=t,c.d=f,c}function jt(e){return O(e=new this(e),e.e+1,this.rounding)}function Zt(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function $t(e){return new this(e).sin()}function Ht(e){return new this(e).sinh()}function Gt(e){return new this(e).sqrt()}function Vt(e,n){return new this(e).sub(n)}function Kt(){var e=0,n=arguments,t=new this(n[e]);for(C=!1;t.s&&++e<n.length;)t=t.plus(n[e]);return C=!0,O(t,this.precision,this.rounding)}function zt(e){return new this(e).tan()}function Xt(e){return new this(e).tanh()}function Jt(e){return O(e=new this(e),e.e+1,1)}P=Dn(b),P.prototype.constructor=P,P.default=P.Decimal=P,g=new P(g),y=new P(y),typeof define=="function"&&define.amd?define(function(){return P}):typeof hn!="undefined"&&hn.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(E[Symbol.for("nodejs.util.inspect.custom")]=E.toString,E[Symbol.toStringTag]="Decimal"),hn.exports=P):(i||(i=typeof self!="undefined"&&self&&self.self==self?self:window),B=i.Decimal,P.noConflict=function(){return i.Decimal=B,P},i.Decimal=P)})(rt)});var st=Ke(w=>{"use strict";var Xr=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(w,"__esModule",{value:!0});w.calculate=w.parse=w.mainP=w.skipEqualSignP=w.exprP=w.binaryExprP=w.binaryOptP=w.unaryExprP=w.funcCallP=w.funcNameP=w.constantAtomicP=w.includesP=w.decimalAtomicP=w.parenthesesP=w.unaryOptP=w.ofStringArrayP=w.rightParenthesisP=w.leftParenthesisP=w.whitespaceP=w.BinaryExpr=w.Parentheses=w.Unary=w.FuncCall=w.ConstantAtomic=w.DecimalAtomic=w.Node=w.funcNameSyms=w.constSyms=w.unaryOptSyms=w.binaryOptSyms=w.binaryAddOptSyms=w.binaryMulOptSyms=w.binaryExponentOptSyms=void 0;var Z=Xr(tt()),Pe=Sn();w.binaryExponentOptSyms=["**"];w.binaryMulOptSyms=["%","*","/"];w.binaryAddOptSyms=["+","-"];w.binaryOptSyms=[...w.binaryExponentOptSyms,...w.binaryMulOptSyms,...w.binaryAddOptSyms];w.unaryOptSyms=["+","-"];w.constSyms=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"];w.funcNameSyms=["abs","acos","acosh","add","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","div","exp","floor","hypot","ln","log","log2","log10","max","min","mod","mul","pow","random","round","sign","sin","sinh","sqrt","sub","tan","tanh","trunc"];var me=class{constructor(){this.type=this.constructor.name}getPrintLine(u,a,h,g){let y=`${u}${a}`;return h!==void 0&&(y+=` -> ${h}`),g!==void 0&&(y+=` => ${g.toFixed(5)}`),y}getPrintTree({indent:u="",printRaw:a=!0,printResult:h=!0}={}){let g=[this.getPrintLine(u,this.type,a?this.raw:void 0,h?this.result:void 0)];if(this.children)for(let y=0,b=this.children.length;y<b;y++){let P=this.children[y];typeof P=="string"?g.push(this.getPrintLine(u+"  ","Operator",a?P:void 0)):g.push(...P.getPrintTree({indent:u+"  ",printRaw:a,printResult:h}))}return g}};w.Node=me;var De=class extends me{constructor(u){super();this.source=u}get result(){if(this.source instanceof Pe.Decimal)return this.source;if(this.source.endsWith("%")){let u=this.source.slice(0,-1);return new Pe.Decimal(u.replace(/_/g,"")).div(100)}return new Pe.Decimal(this.source.replace(/_/g,""))}get raw(){return this.source instanceof Pe.Decimal?this.source.valueOf():this.source}};w.DecimalAtomic=De;var Cn=class extends me{constructor(u){super();if(this.raw=u,!w.constSyms.includes(this.raw))throw new Error(`Constant ${this.raw} not exists`);this.constSym=this.raw}get result(){return new Pe.Decimal(Math[this.constSym])}};w.ConstantAtomic=Cn;var On=class extends me{constructor(u,a){super();if(this.rawFuncName=u,this.args=a,!w.funcNameSyms.includes(this.rawFuncName))throw new Error(`Function ${this.rawFuncName} not exists`);this.funcNameSym=this.rawFuncName,this.children=a}get raw(){return`${this.funcNameSym}(${this.args.map(u=>u.raw).join(",")})`}get result(){let u=this.args.map(a=>a.result);return Pe.Decimal[this.funcNameSym](...u)}};w.FuncCall=On;var Fe=class extends me{constructor(u,a){super();this.operators=u,this.node=a,this.children=[this.operators.join(""),a]}get raw(){return`${this.operators.join("")}${this.node.raw}`}get operator(){return this.operators.filter(u=>u==="-").length%2==1?"-":"+"}get result(){return this.operator==="+"?this.node.result:new Pe.Decimal(0).sub(this.node.result)}};w.Unary=Fe;var kn=class extends me{constructor(u){super();this.node=u,this.children=[u]}get raw(){return`(${this.node.raw})`}get result(){return this.node.result}};w.Parentheses=kn;var dn=class extends me{constructor(u,a){super();this.first=u,this.rest=a,this.children=[u,...a.reduce((h,[g,y])=>(h.push(g,y),h),[])]}get raw(){let u=this.first.raw;return this.rest.forEach(([a,h])=>{u+=a+h.raw}),u}calculate(u,a,h){let g={"+":()=>u.result.add(h.result),"-":()=>u.result.minus(h.result),"*":()=>u.result.mul(h.result),"/":()=>u.result.div(h.result),"%":()=>u.result.modulo(h.result),"**":()=>u instanceof Fe?new Fe(u.operators,new De(u.node.result.pow(h.result))).result:u.result.pow(h.result)}[a]();return new De(g)}get result(){let u=[...this.rest],a=[],h=[];a.push(this.first);let g=()=>h[h.length-1],y=P=>{let S=[],B=[];for(;h.length&&P.includes(g());)S.length===0&&S.push(a.pop()),B.push(h.pop()),S.push(a.pop());if(S.length>0){let A=S.pop();for(;B.length>0;){let C=B.pop(),D=S.pop();A=this.calculate(A,C,D)}a.push(A)}},b=()=>{for(;h.length&&w.binaryExponentOptSyms.includes(g());){let P=h.pop(),S=a.pop(),B=a.pop();a.push(this.calculate(B,P,S))}};for(;u.length>0;){let[P,S]=u.shift();w.binaryExponentOptSyms.includes(P)?(h.push(P),a.push(S)):w.binaryMulOptSyms.includes(P)?(b(),h.push(P),a.push(S)):w.binaryAddOptSyms.includes(P)&&(b(),y(w.binaryMulOptSyms),h.push(P),a.push(S))}return b(),y(w.binaryMulOptSyms),y(w.binaryAddOptSyms),a.pop().result}};w.BinaryExpr=dn;w.whitespaceP=Z.default.optWhitespace;var be=w.whitespaceP;w.leftParenthesisP=Z.default.string("(").trim(be);w.rightParenthesisP=Z.default.string(")").trim(be);var Jr=(...i)=>Z.default.alt(...i.map(u=>Z.default.string(u)));w.ofStringArrayP=Jr;w.unaryOptP=(0,w.ofStringArrayP)(...w.unaryOptSyms).trim(be).desc("unaryOperator");var Qr=i=>i.wrap(w.leftParenthesisP,w.rightParenthesisP).map(u=>new kn(u));w.parenthesesP=Qr;w.decimalAtomicP=Z.default.regexp(/(\d[\d_]*(\.\d[\d_]*)?|(\.\d[\d_]*))%?(e[-+]?\d[\d_]*)?/).map(i=>new De(i)).desc("decimal");var Yr=i=>Z.default.alt(...i.map(u=>Z.default.string(u)));w.includesP=Yr;w.constantAtomicP=(0,w.includesP)(w.constSyms).map(i=>new Cn(i)).desc("constant");w.funcNameP=(0,w.includesP)(w.funcNameSyms).desc("functionName");w.funcCallP=Z.default.lazy(()=>Z.default.seq(w.funcNameP,Z.default.sepBy(w.exprP,Z.default.string(",").trim(be)).wrap(w.leftParenthesisP,w.rightParenthesisP)).map(([i,u])=>new On(i,u))).desc("functionCall");w.unaryExprP=Z.default.lazy(()=>Z.default.seq(w.unaryOptP.many(),Z.default.alt((0,w.parenthesesP)(w.exprP),w.funcCallP,w.constantAtomicP,w.decimalAtomicP)).map(([i,u])=>i.length?new Fe(i,u):u)).desc("unaryExpression");w.binaryOptP=(0,w.ofStringArrayP)(...w.binaryOptSyms).trim(be).desc("binaryOperator");w.binaryExprP=Z.default.lazy(()=>Z.default.alt(Z.default.seq(w.unaryExprP,w.binaryOptP,w.binaryExprP).map(([i,u,a])=>new dn(i,[[u,a.first],...a.rest])),Z.default.seq(w.unaryExprP,w.binaryOptP,w.unaryExprP).map(([i,u,a])=>new dn(i,[[u,a]])))).desc("binaryExpression");w.exprP=Z.default.alt(w.binaryExprP,w.unaryExprP).trim(be).desc("expression");w.skipEqualSignP=Z.default.string("=").trim(be).times(0,1);w.mainP=w.exprP.skip(w.skipEqualSignP).desc("main");var ei=i=>w.mainP.tryParse(i);w.parse=ei;var ni=i=>{let u=i.lastIndexOf("=");return u===-1?0:u+1},ti=i=>{let u=i.search(/\W/);return u===-1?i.length:u+1},it=(i,u,a=[],h)=>{try{let g=(0,w.parse)(i);return{skip:u,ast:g,decimal:g.result,result:g.result.valueOf()}}catch(g){let y=g;if(y.type==="ParsimmonError"&&i.length>0){let P=ti(i),S=u+P;return it(i.slice(P),S,[...a,S],h)}let b=Array.from(Array(h.length)).map((P,S)=>a.includes(S)?"^":" ").join("");throw new Error(["CalculateError:",h,b,y.stack].join(`\r
`))}},ri=i=>{let u=i.replace(/[=\s]*$/g,""),a=ni(u);return it(u.slice(a),a,[],i)};w.calculate=ri});var _n=Ke(ce=>{"use strict";var ii=ce&&ce.__createBinding||(Object.create?function(i,u,a,h){h===void 0&&(h=a),Object.defineProperty(i,h,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,h){h===void 0&&(h=a),i[h]=u[a]}),si=ce&&ce.__exportStar||function(i,u){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&ii(u,i,a)};Object.defineProperty(ce,"__esModule",{value:!0});ce.Decimal=void 0;si(st(),ce);var oi=Sn();Object.defineProperty(ce,"Decimal",{enumerable:!0,get:function(){return oi.Decimal}})});rr(exports,{activate:()=>ui});var F=ze(require("coc.nvim")),ut=ze(_n());var K=ze(require("coc.nvim")),ot=ze(_n()),Bn=class{constructor(u,a){this.config=u;this.onError=a;this.srcId="coc-calc";this.enableDebug=this.config.get("debug",!1),this.enableReplaceOriginalExpression=this.config.get("replaceOriginalExpression",!0)}async highlight(u){(await K.workspace.document).buffer.highlightRanges(this.srcId,"CocCalcFormule",[u])}async clearHighlight(){(await K.workspace.document).buffer.clearNamespace(this.srcId)}calculateLine(u,a){let{skip:h,result:g}=(0,ot.calculate)(a),y=a.slice(h),b=y.match(/^\s+/),P=b?b[0].length:0,S=y.match(/[\s=]+$/),B=S?S[0].length:0,A=a.endsWith(" =")?" "+g:g;return{skip:h,result:g,insertText:A,expressionRange:K.Range.create(u.line,h+P,u.line,u.character-B),expressionWithEqualSignRange:K.Range.create(u.line,h+P,u.line,u.character),expressionEndRange:K.Range.create(u.line,u.character,u.line,u.character)}}async provideCompletionItems(u,a,h,g){let y=u.getText(K.Range.create(K.Position.create(a.line,0),a));if(!y.trimRight().endsWith("="))return[];try{let{skip:b,expressionRange:P,expressionWithEqualSignRange:S,expressionEndRange:B,insertText:A}=this.calculateLine(a,y);return this.clearHighlight().catch(this.onError),this.highlight(P).catch(this.onError),this.replacePosition=S,[{label:A,kind:K.CompletionItemKind.Constant,documentation:"`"+y.slice(b).trimLeft()+A+"`",textEdit:K.TextEdit.replace(B,A)}]}catch(b){return this.enableDebug&&b instanceof Error&&K.window.showMessage(b.message,"error"),[]}}async resolveCompletionItem(u,a){return this.enableReplaceOriginalExpression&&(u.textEdit={range:this.replacePosition,newText:u.textEdit.newText.trim()}),u}};var ui=async i=>{let{subscriptions:u,logger:a}=i,h=F.workspace.getConfiguration("calc"),{nvim:g}=F.workspace;h.get("highlight",!0)&&g.command("highlight default link CocCalcFormule CocHighlightText",!0);let y=a.error.bind(a),b=new Bn(h,y);u.push(F.languages.registerCompletionItemProvider("calc","CALC",null,b,["="," "],h.get("priority",1e3)),F.workspace.registerAutocmd({event:["CursorMoved","CursorMovedI","InsertLeave"],callback:()=>{b.clearHighlight().catch(y)}}),F.commands.registerCommand("calc.calculate",B=>{try{return(0,ut.calculate)(B).result}catch{return null}}));async function P(B,A,C,D){let{insertText:T,expressionWithEqualSignRange:Y,expressionEndRange:fe}=b.calculateLine(A,C);if(D==="append"){let ge=C.trimRight().endsWith("=");await B.applyEdits([F.TextEdit.replace(fe,ge?T:" = "+T)])}else D==="replace"&&await B.applyEdits([F.TextEdit.replace(Y,T)])}async function S(B,A){let C=await F.workspace.document,D=await F.window.getCursorPosition(),T=C.getline(D.line),[Y,fe]=(()=>A?[D,T.slice(0,D.character)]:[F.Position.create(D.line,T.length),T])();await P(C,Y,fe,B)}u.push(F.commands.registerCommand("calc.appendWithCursor",async()=>{await S("append",!0)}),F.commands.registerCommand("calc.append",async()=>{await S("append",!1)}),F.commands.registerCommand("calc.replaceWithCursor",async()=>{await S("replace",!0)}),F.commands.registerCommand("calc.replace",async()=>{await S("replace",!1)}),F.workspace.registerKeymap(["n","i"],"calc-result-append",async()=>{await F.commands.executeCommand("calc.append")}),F.workspace.registerKeymap(["n","i"],"calc-result-replace",async()=>{await F.commands.executeCommand("calc.replace")}))};0&&(module.exports={activate});
